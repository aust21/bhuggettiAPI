{% extends 'base.html' %}
<!--  -->

{% block title %} bhuggetti API | My dashbord {% endblock %}

<!--  -->
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='dash.css') }}" />
<main>
  <section class="sec">
    <div class="holder flex">
      <div class="sec__container">
        <div class="cards masonry-grid">
          {% for i in posts %}
          <div class="card">
            <!-- <p class="name">By: {{i.user.name}}</p> -->
            <div class="details">
              <p class="question">{{i.question}}</p>
              <!-- <p class="date_created">{{i.date_created}}</p> -->
            </div>
            <p
              class="speciality center"
              style="
                margin-top: 0.3rem;
                background-color: #fff;
                padding: 0.2rem;
                border-radius: 3px;
              "
            >
              Field: {{i.domain}}
            </p>
            <button>
              <a href="/dash/delete-post/{{i.field}}/{{i.id}}">Delete</a>
            </button>
          </div>
          {% endfor %}
        </div>
      </div>

      <div class="submit_form_outer">
        <div class="submit_form">
          <h3>Post a question</h3>
          <div class="form">
            <form
              id="questionForm"
              method="POST"
              action="{{ url_for('views.submit_question')}}"
            >
              <div class="q-entry">
                <label for="category">Question Type</label>
                <select name="category" id="category">
                  <option value="none">Select</option>
                  <option value="culture-fit">Culture Fit Question</option>
                  <option value="technical">Technical Question</option>
                </select>
              </div>

              <div class="q-entry">
                <label for="field">Question Field</label>
                <select name="field" id="field">
                  <option value="none">Select</option>
                  <option value="architecture">Architecture</option>
                  <option value="software">Software Engineering</option>
                  <option value="business management">
                    Business Management
                  </option>
                  <option value="mechanical engineering">
                    Mechanical Engineering
                  </option>
                  <option value="not relevant">Not Relevant</option>
                </select>
              </div>

              <div class="q-entry">
                <label for="question">Question</label>
                <textarea name="question" id="question" required></textarea>
              </div>
              <button type="submit">Submit</button>
            </form>
          </div>
        </div>

        <p class="filter center" style="margin-top: 1rem">Filter questions</p>
        <div class="btns flex">
          <a
            href="{{ url_for('views.home', view='culture-fit') }}"
            class="{% if view == 'culture-fit' %}active{% endif %}"
          >
            Culture
          </a>
          <a
            href="{{ url_for('views.home', view='technical') }}"
            class="{% if view == 'technical' %}active{% endif %}"
          >
            Technical
          </a>

          <a
            href="{{ url_for('views.home', view='all') }}"
            class="{% if view == 'all' %}active{% endif %}"
          >
            All
          </a>
        </div>
      </div>
    </div>
  </section>
</main>

<script>
  const select = document.getElementById("field");
  let options = Array.from(select.options);

  // Remove the "Select" option from sorting
  const selectOption = options.shift();

  // Sort options alphabetically by their text
  options.sort((a, b) => a.text.localeCompare(b.text));

  // Add the "Select" option back at the beginning
  options.unshift(selectOption);

  // Rebuild the select options
  select.innerHTML = "";
  options.forEach((option) => select.add(option));
</script>
{% endblock %}
